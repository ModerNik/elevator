(function(){"use strict";var t={6667:function(t,o,e){var r=e(9242),n=e(3396);const l={class:"building"},s={class:"column"},i={class:"column"},u={class:"building"},a={class:"column"};function c(t,o,e,r,c,f){const d=(0,n.up)("ElevatorShaft"),h=(0,n.up)("FloorButton");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[(0,n._)("div",s,[(0,n._)("div",null,[(0,n._)("button",{onClick:o[0]||(o[0]=(...t)=>f.deleteFloor&&f.deleteFloor(...t)),class:"delete_floor_button"},"-")]),(0,n._)("div",null,[(0,n._)("button",{onClick:o[1]||(o[1]=(...t)=>f.addFloor&&f.addFloor(...t)),class:"add_floor_button"},"+")])]),(0,n._)("div",i,[(0,n._)("button",{onClick:o[2]||(o[2]=(...t)=>f.deleteElevator&&f.deleteElevator(...t)),class:"delete_floor_button"},"-"),(0,n._)("button",{onClick:o[3]||(o[3]=(...t)=>f.addElevator&&f.addElevator(...t)),class:"add_floor_button"},"+")])]),(0,n._)("div",u,[(0,n.Wm)(d,{floors:c.floors,elevators:c.elevators},null,8,["floors","elevators"]),(0,n._)("div",a,[(0,n.Wm)(h,{onFloorCall:f.floorCall,floors:c.floors},null,8,["onFloorCall","floors"])])])],64)}e(7658),e(541);function f(t,o,e,r,l,s){const i=(0,n.up)("FloorCell"),u=(0,n.up)("ElevatorCabin");return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.elevators,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"column",key:t.id},[(0,n.Wm)(i,{floors:e.floors},null,8,["floors"]),(0,n.Wm)(u,{elevator:t},null,8,["elevator"])])))),128)}const d=["id"],h=["id"];function v(t,o,e,r,l,s){return(0,n.wg)(),(0,n.iD)("div",{id:"cabin-"+e.elevator,class:"cabina"},[(0,n._)("div",{id:"indicator-"+e.elevator,class:"indicator"},"1",8,h)],8,d)}var b={name:"ElevatorCabin",props:{moving:Boolean,floor:{type:Number,default:1},elevator:Number}},m=e(89);const _=(0,m.Z)(b,[["render",v],["__scopeId","data-v-6eded4f0"]]);var g=_;const p=(0,n._)("hr",{class:"divider"},null,-1),y=[p];function C(t,o,e,r,l,s){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.floors,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"cell",key:t.id},y)))),128)}var E={name:"FloorCell",props:{floors:Array}};const w=(0,m.Z)(E,[["render",C]]);var B=w,k={name:"ElevatorShaft",props:{elevators:Array,floors:Array},components:{FloorCell:B,ElevatorCabin:g}};const F=(0,m.Z)(k,[["render",f]]);var q=F,I=e(7139);const O=["id","onClick"];function x(t,o,e,r,l,s){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.floors,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"button_box",key:t.id},[(0,n._)("button",{id:"button-"+t,onClick:o=>s.button_push(t),class:"floor_button"},(0,I.zw)(t),9,O)])))),128)}var T={name:"FloorButton",props:{floors:Array},emits:["floor-call"],methods:{button_push(t){this.$emit("floor-call",t)}}};const D=(0,m.Z)(T,[["render",x]]);var N=D,j={name:"App",components:{FloorButton:N,ElevatorShaft:q},data(){return{moving:Boolean,floors:[],elevators:[],current_floors:[],buttons_queue:[]}},created(){this.floors=[5,4,3,2,1],this.elevators=[1],this.current_floors=[1],this.buttons_queue=[]},methods:{floorCall(t){let o=t;if(o){let t=!0;for(let e=0;e<this.buttons_queue.length;e++)if(o==this.buttons_queue[e]){t=!1;break}if(t)for(let e=0;e<this.current_floors.length;e++)if(o==this.current_floors[e]){t=!1;break}if(!t)return;this.buttons_queue.push(o),this.changeButtonColor("wait",o)}else console.log("Приехал"),console.log("Очередь:",this.buttons_queue);if(0!=this.buttons_queue.length){if(0==o){let t=0;for(let o=0;o<this.current_floors.length;o++)0==this.current_floors[o]&&t++;o=this.buttons_queue[t]}let t=0,e=this.floors.length;for(let r=0;r<this.current_floors.length;r++)if(this.current_floors[r]){let n=Math.abs(this.current_floors[r]-o);n<e&&(e=n,t=r+1)}t&&(this.moveCabin(t,o),console.log("Очередь:",this.buttons_queue))}},moveCabin(t,o){var e="cabin-"+t,r=document.getElementById(e);this.changeButtonColor("coming",o),console.log("Moving to:",o);var n=Math.abs(o-this.current_floors[t-1]);r.style.transition=n+"s";var l,s="indicator-"+t;l=this.current_floors[t-1]-o>0?"∨":"∧",l+=" "+o,document.getElementById(s).innerHTML=l,r.style.bottom=120*o-120+"px",setTimeout((()=>this.relax(t)),1e3*n),setTimeout((()=>this.buttons_queue.splice(this.buttons_queue.indexOf(o),1)),1e3*n+3e3),this.current_floors[t-1]=0,setTimeout((()=>this.current_floors[t-1]=o),1e3*n+3e3),setTimeout((()=>this.floorCall(0)),1e3*n+3e3),setTimeout((()=>this.changeButtonColor("free",o)),1e3*n+3e3)},relax(t){var o="cabin-"+t,e=document.getElementById(o);e.style.transition="1.5s",e.style.opacity="0.2",setTimeout((()=>e.style.opacity="1"),1500)},changeButtonColor(t,o){let e,r="button-"+o;try{e=document.getElementById(r).className,console.log(e)}catch(n){for(let t=0;t<this.floors.length;t++)r="button-"+(t+1),document.getElementById(r).className="floor_button"}switch(t){case"wait":document.getElementById(r).className="floor_button_wait";break;case"coming":document.getElementById(r).className="floor_button_coming";break;case"free":document.getElementById(r).className="floor_button";break;default:document.getElementById(r).className="floor_button";break}},addFloor(){7==this.floors.length?alert("В данном примере ограничимся 7-ю этажами, у нас элитный малоэтажный пентхаус. ;D"):this.floors.unshift(this.floors.length+1)},deleteFloor(){if(this.floors.length>2){this.floors.shift();for(let t=0;t<this.floors.length;t++){let o="button-"+(t+1);document.getElementById(o).className="floor_button"}this.buttons_queue.splice(0,this.buttons_queue.length);for(let e=0;e<this.current_floors.length;e++){this.current_floors[e]=1;var t="cabin-"+(e+1),o=document.getElementById(t);o.style.bottom="0px";let r="indicator-"+(e+1);document.getElementById(r).innerHTML="1"}}else alert("Зачем делать лифт в одноэтажном здании?")},addElevator(){this.elevators.length>=10?alert("Куда столько? 0_о"):(this.elevators.push(this.elevators.length+1),this.current_floors.push(1))},deleteElevator(){this.elevators.length>1?(this.elevators.pop(),this.current_floors.pop()):alert("Ну хоть 1 то нужно оставить.")}}};const H=(0,m.Z)(j,[["render",c]]);var M=H;(0,r.ri)(M).mount("#app")}},o={};function e(r){var n=o[r];if(void 0!==n)return n.exports;var l=o[r]={exports:{}};return t[r](l,l.exports,e),l.exports}e.m=t,function(){var t=[];e.O=function(o,r,n,l){if(!r){var s=1/0;for(c=0;c<t.length;c++){r=t[c][0],n=t[c][1],l=t[c][2];for(var i=!0,u=0;u<r.length;u++)(!1&l||s>=l)&&Object.keys(e.O).every((function(t){return e.O[t](r[u])}))?r.splice(u--,1):(i=!1,l<s&&(s=l));if(i){t.splice(c--,1);var a=n();void 0!==a&&(o=a)}}return o}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[r,n,l]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,r){var n,l,s=r[0],i=r[1],u=r[2],a=0;if(s.some((function(o){return 0!==t[o]}))){for(n in i)e.o(i,n)&&(e.m[n]=i[n]);if(u)var c=u(e)}for(o&&o(r);a<s.length;a++)l=s[a],e.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return e.O(c)},r=self["webpackChunkelevator"]=self["webpackChunkelevator"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(6667)}));r=e.O(r)})();
//# sourceMappingURL=app.2500a412.js.map